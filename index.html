<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>String - Bingo</title>
    <meta name="description" content="Complete String challenges and get BINGO! An interactive team bonding game.">
    <meta name="keywords" content="bingo, game, string, interactive, challenges, team bonding">
    <link rel="stylesheet" href="styles/main.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NM42QYT2MD"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-NM42QYT2MD');
    </script>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>

<body>
    <div class="grid-container">
        <div class="bingo-grid" id="bingoGrid">
            <!-- Grid will be populated by JavaScript -->
        </div>
    </div>

    <div class="footer">
        <button class="btn btn-secondary" id="resetBtn">Reset</button>
        <button class="btn btn-primary" id="downloadBtn">Download Images</button>
        <div id="userInfo" style="display: none; margin: 10px 0;">
            <img id="userAvatar" style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px;">
            <span id="userName"></span>
            <button class="btn btn-secondary" id="logoutBtn" style="margin-left: 10px;">Logout</button>
        </div>
        <p>Made with ❤️ by <a href="https://for.edu.sg/str-bingo-tree" target="_blank">String Team</a></p>
        <p style="font-size: 0.7em; color: #666; margin-top: 10px;">For Samsung GenAI for Educators Community Event 2025 9.10</p>
        <button class="btn btn-outline" id="authBtn">🎯 Make Your Own</button>
        <button class="btn btn-outline" id="makeYourOwnBtn" style="display: none;">🎯 Make Your Own</button>
    </div>

    <!-- Options Modal -->
    <div id="optionsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Complete Challenge</h2>
            <p>How would you like to provide proof?</p>
            <button class="btn btn-primary" id="cameraBtn">📷 Take Photo</button>
            <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">📁 Upload
                Image</button>
            <input type="file" id="fileInput" accept="image/*" style="display: none;">
        </div>
    </div>

    <!-- Camera Modal -->
    <div id="cameraModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Take Photo</h2>
            <div class="camera-container">
                <video id="video" autoplay playsinline></video>
            </div>
            <div class="camera-controls">
                <button class="btn btn-primary" id="captureBtn">📸 Capture</button>
                <button class="btn btn-secondary" id="switchCameraBtn">🔄 Switch Camera</button>
                <button class="btn btn-outline" id="uploadBtn">📁 Upload Image</button>
                <input type="file" id="cameraFileInput" accept="image/*" style="display: none;">
            </div>
        </div>
    </div>



    <!-- Bingo Modal -->
    <div id="bingoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>🎉 BINGO! 🎉</h2>
            <p>Congratulations! You've completed a line!</p>
            <p>You've successfully completed 5 challenges in a row!</p>
            <button class="btn btn-primary" id="celebrateBtn">🎊 Celebrate!</button>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>🎯 Create Your Own Bingo</h2>
            <p>Sign in with Google to create and manage your own custom bingo games</p>
            <div id="googleSignInBtn" style="margin: 20px 0; text-align: center;"></div>
            <p style="font-size: 0.9em; color: #666; margin-top: 20px;">
                By signing in, you can create unlimited custom bingo games and share them with your teams.
            </p>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <div>
            <button class="btn btn-primary admin-create-btn" id="createNewGameBtn">
                <span class="btn-icon">+</span>
                Create New Game
            </button>
        </div>

        <div class="admin-content">
            <div class="games-section">
                <div class="empty-state" id="emptyState">
                    <h2>No games yet</h2>
                    <p>Create your first bingo game to get started</p>
                    <button class="btn btn-primary" id="createNewGameBtn2">
                        <span class="btn-icon">+</span>
                        Create New Game
                    </button>
                </div>

                <div class="games-list" id="gamesList" style="display: none;">
                    <!-- Games will be populated here -->
                </div>
            </div>
        </div>

        <div class="admin-footer">
            <button class="btn btn-outline" id="backToGameBtn">← Back to Game</button>
        </div>
    </div>

    <!-- Game Creation Form -->
    <div id="gameCreationForm" class="game-creation-form" style="display: none;">
        <div class="form-header">
            <button class="btn btn-outline back-btn" id="backToDashboardBtn">← Back</button>
            <h1>Create New Game</h1>
            <p class="form-subtitle">Set up your bingo game</p>
        </div>

        <div class="form-content">
            <!-- Game Details Section -->
            <div class="form-section">
                <h2>Game Details</h2>
                <p class="section-subtitle">Give your game a name</p>

                <div class="form-group">
                    <label for="gameName">Game Name</label>
                    <input type="text" id="gameName" placeholder="e.g., Teacher Icebreaker Bingo" maxlength="100">
                </div>
            </div>

            <!-- Questions Section -->
            <div class="form-section">
                <h2>Questions</h2>
                <p class="section-subtitle">Add your bingo questions (25 total, center is FREE)</p>

                <div class="questions-toolbar">
                    <button class="btn btn-outline" id="editQuestionsBtn">
                        <span class="btn-icon">📝</span>
                        Edit
                    </button>
                    <button class="btn btn-outline" id="importCsvBtn">
                        <span class="btn-icon">📄</span>
                        CSV
                    </button>
                </div>

                <div class="bingo-editor-grid" id="bingoEditorGrid">
                    <!-- 5x5 grid will be generated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="form-footer">
            <button class="btn btn-secondary" id="cancelGameBtn">Cancel</button>
            <button class="btn btn-primary" id="createGameBtn">Create Game</button>
        </div>
    </div>

    <!-- Status Messages -->
    <div class="status" id="status"></div>

    <script type="module" src="js/app.js"></script>
</body>

</html>